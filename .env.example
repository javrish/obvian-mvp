# Obvian MVP - Environment Variables Example
# Copy this file to .env.local and fill in your actual values
# NEVER commit .env.local to version control

# ========================================
# CRITICAL: JWT Configuration (REQUIRED)
# ========================================
# Generate a secure 512-bit secret:
#   openssl rand -base64 64
#
# MUST be at least 256 bits (32 characters) for HS256
OBVIAN_JWT_SECRET=REPLACE_WITH_GENERATED_SECRET_FROM_OPENSSL_RAND_BASE64_64

# JWT token expiration in milliseconds (default: 24 hours)
OBVIAN_JWT_EXPIRATION=86400000

# JWT issuer and audience claims
OBVIAN_JWT_ISSUER=obvian-api
OBVIAN_JWT_AUDIENCE=obvian-client

# ========================================
# GitHub App Configuration (REQUIRED for CI/CD verification)
# ========================================
# GitHub App ID from https://github.com/settings/apps/YOUR_APP
GITHUB_APP_ID=123456

# GitHub App Installation ID (from installation URL)
GITHUB_APP_INSTALLATION_ID=789012

# GitHub App Private Key (PEM format)
# Generate: GitHub App Settings → Private Key → Generate Private Key
# Load: export GITHUB_APP_PRIVATE_KEY="$(cat your-private-key.pem)"
GITHUB_APP_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\nREPLACE_WITH_YOUR_PRIVATE_KEY\n-----END RSA PRIVATE KEY-----"

# GitHub Webhook Secret (for validating webhook signatures)
# Set in: GitHub App Settings → Webhook → Webhook secret
GITHUB_WEBHOOK_SECRET=REPLACE_WITH_WEBHOOK_SECRET

# ========================================
# Server Configuration
# ========================================
PORT=8080
SPRING_PROFILES_ACTIVE=dev

# ========================================
# Database Configuration (Optional - uses H2 in-memory by default)
# ========================================
# For PostgreSQL:
# DATABASE_URL=jdbc:postgresql://localhost:5432/obvian
# DATABASE_USERNAME=obvian_user
# DATABASE_PASSWORD=secure_password
# DATABASE_DDL_AUTO=validate

# For H2 (default):
DATABASE_URL=jdbc:h2:mem:obvian
DATABASE_USERNAME=sa
DATABASE_PASSWORD=
DATABASE_DDL_AUTO=create-drop

# ========================================
# Redis Configuration (Optional - for distributed deployments)
# ========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# ========================================
# CORS Configuration
# ========================================
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# ========================================
# Security & Rate Limiting
# ========================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_RPM=100

# ========================================
# Execution Configuration
# ========================================
MAX_PARALLEL_EXECUTIONS=10
EXECUTION_TIMEOUT_MS=300000
RETRY_MAX_ATTEMPTS=3

# ========================================
# Petri Net Validation Configuration
# ========================================
PETRI_K_BOUND=200
STATE_SPACE_TIMEOUT_MS=60000

# ========================================
# Setup Instructions
# ========================================
# 1. Copy this file: cp .env.example .env.local
# 2. Generate JWT secret: openssl rand -base64 64
# 3. Set OBVIAN_JWT_SECRET with generated value
# 4. (Optional) Create GitHub App for workflow verification
# 5. Load environment: source .env.local OR use IDE env file support
# 6. Start application: mvn spring-boot:run
#
# For production deployment:
# - Use a secrets manager (HashiCorp Vault, AWS Secrets Manager)
# - Rotate secrets regularly (recommended: every 90 days)
# - Never log or expose secrets in error messages
# - Use asymmetric keys (RS256) instead of HS256 for enhanced security
